/* ==========================================================================
   FYRECHAT BASE STYLES
   - All customization flows through CSS variables.
   - Themes can override these variables in separate CSS files.
   ========================================================================== */

:root{
  /* Layout */
  --pad: 18px;
  --gap: 10px;
  --maxWidth: 560px;

  /* Typography */
  --fontSize: 18px;
  --lineHeight: 1.28;

  /* Bubble look */
  --bubbleBg: rgba(0,0,0,0.58);
  --bubbleBorder: rgba(255,255,255,0.10);
  --textColor: rgba(255,255,255,0.95);
  --radius: 16px;
  --blur: 10px;
  --shadow: 0 12px 34px rgba(0,0,0,0.35);

  /* Animations */
  --enterMs: 200ms;
  --exitMs: 260ms;
  --exitShift: 10px;

  /* Badges */
  --badgeSize: 1.15em;
  --badgeGap: 6px;

  /* Emotes */
  --emoteSize: 1.25em;
}

html, body {
  margin:0;
  width:100%;
  height:100%;
  background: transparent;
  overflow:hidden;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* Debug banner (shown only when debug=1) */
#debug {
  position: fixed;
  top: 0; left: 0; right: 0;
  padding: 8px 10px;
  background: rgba(255,0,0,0.80);
  color: #fff;
  font-size: 13px;
  z-index: 99999;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: none;
  pointer-events: none;
}

/* Message stack container */
#stack {
  position: fixed;
  left: var(--pad);
  right: var(--pad);
  top: var(--pad);
  bottom: var(--pad);

  display: flex;
  flex-direction: column;
  justify-content: flex-end; /* newest at bottom */
  gap: var(--gap);

  max-width: var(--maxWidth);

  overflow: hidden;
  pointer-events: none;
}

/* One bubble */
.msg {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px 14px;
  border-radius: var(--radius);

  background: var(--bubbleBg);
  border: 1px solid var(--bubbleBorder);
  box-shadow: var(--shadow);

  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));

  opacity: 0;
  transform: translateY(12px);
  animation: in var(--enterMs) ease-out forwards;

  /* overflow: hidden;*/
  overflow: visible; /* FIX: prevents text/shadow from being clipped during rapid chat */
}

@keyframes in {
  to { opacity: 1; transform: translateY(0); }
}

.out {
  animation: out var(--exitMs) ease-in forwards;
}

@keyframes out {
  to { opacity: 0; transform: translateY(var(--exitShift)); }
}

/* Top row: badges + name */
.meta {
  display: flex;
  align-items: baseline;
  gap: 10px;
  flex-wrap: wrap;
  line-height: 1.1;
}

.name {
  font-weight: 800;
  font-size: calc(var(--fontSize) * 1.02);
  text-shadow: 0 2px 10px rgba(0,0,0,0.35);
}

/* Message body */
.text {
  font-weight: 500;
  font-size: var(--fontSize);
  line-height: var(--lineHeight);
  color: var(--textColor);
  text-shadow: 0 2px 12px rgba(0,0,0,0.35);
  white-space: pre-wrap;
  word-break: break-word;
  padding-bottom: 2px; /* FIX for overflow */
}

/* Twitch emote images */
.emote {
  height: var(--emoteSize);
  vertical-align: -0.25em;
  margin: 0 2px;
}

/* Twitch badge images */
.badge{
  height: var(--badgeSize);
  width: auto;
  vertical-align: -0.15em;
  margin-right: var(--badgeGap);
  filter: drop-shadow(0 2px 6px rgba(0,0,0,0.35));
}
